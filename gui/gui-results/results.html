<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>

<link rel="stylesheet" type="text/css" href="css/smoothness/jquery-ui-1.10.2.custom.min.css" media="screen">
<script type="text/javascript" src="../gui/js/jquery/jquery-1.9.1.min.js" charset="utf-8"></script>
<script type="text/javascript" src="../gui/js/jquery/jquery.xdomainajax.js" charset="utf-8"></script>
<script type="text/javascript" src="../gui/js/jquery/ui/jquery-ui-1.10.0.custom.min.js" charset="utf-8"></script>
<script type="text/javascript" src="../gui/js/tools.js" charset="utf-8"></script>

<script>

	var readEnd = function(progressEvent) {
		console.log("read")
	    var fileReader = this;
	    var fileContent = fileReader.result;
	    var fileName = fileReader.file.name;
	    // Note you can not retreive file path, for security reasons. 
	    // But you are not supposed to need it, you already have the content ;)
	    console.log('readEnd:',fileName,fileContent);
	}
	var readError = function(progressEvent) {
	    console.log('readError',progressEvent);
	    switch(progressEvent.target.error.code) {
	        case progressEvent.target.error.NOT_FOUND_ERR:
	            alert('File not found!');
	            break;
	        case progressEvent.target.error.NOT_READABLE_ERR:
	            alert('File not readable!');
	            break;
	        case progressEvent.target.error.ABORT_ERR:
	            break; 
	        default: 
	            alert('Unknow Read error.');
	    }
	}
	var readFile = function(file) {
	    var reader = new FileReader();
	    reader.file = file; // We need it later (filename)
	    //reader.addEventListener('loadstart', readStart, false);
	    reader.addEventListener('load', readEnd, false);
	    reader.addEventListener('error', readError, false);
	    //reader.addEventListener('progress', readProgress, false);
		console.log("reading");
	    reader.readAsBinaryString(file);
	}

	function onError(e) {
		  var msg = '';

		  switch (e.code) {
		    case FileError.QUOTA_EXCEEDED_ERR:
		      msg = 'QUOTA_EXCEEDED_ERR';
		      break;
		    case FileError.NOT_FOUND_ERR:
		      msg = 'NOT_FOUND_ERR';
		      break;
		    case FileError.SECURITY_ERR:
		      msg = 'SECURITY_ERR';
		      break;
		    case FileError.INVALID_MODIFICATION_ERR:
		      msg = 'INVALID_MODIFICATION_ERR';
		      break;
		    case FileError.INVALID_STATE_ERR:
		      msg = 'INVALID_STATE_ERR';
		      break;
		    default:
		      msg = 'Unknown Error';
		      break;
		  };
		  console.log(msg)
	}
	
	window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
	$(document).ready(function() {
		//readFile();
		window.requestFileSystem(TEMPORARY, 1024*1024 , function(fs){
			fs.root.getFile('summary.template', {}, function(fileEntry) {
				fileEntry.file(function(file) {
	    		   var reader = new FileReader();
					console.log("reading")
			       reader.onloadend = function(e) {
			         console.log( this.result);
			       };
	
			       reader.readAsText(file);
				}, onError);
			},onError);
		}, onError);
		//summary_template = load_text_resource_with_ajax("summary.template");
		//console.log(summary_template);

		
    	$("#tabs").tabs();
		// generate ta
	});
 </script>
<body>

<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Summary</a></li>
    <li><a href="#tabs-2">Files</a></li>
  </ul>
  <div id="tabs-1">
  </div>
  <div id="tabs-2">
  </div>
  <div id="tabs-3">
  </div>
</div>


</body>
</html>